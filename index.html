<!DOCTYPE html>
<html lang="en-us">
<head>
  <!-- Minimal head for SEO preview (Google Sites gadget ignores many head tags, so keep light) -->
  <meta charset="utf-8" />
  <title>GTA Mods – StaticQuasar931 (Unblocked GTA-style Modes)</title>
  <meta name="description" content="GTA Mods — a GTA-style collection of game modes running in your browser. Free, fullscreen, and school-safe on Chromebook, PC, and mobile." />
  <meta name="robots" content="index, follow" />

  <!-- === Added SEO for GitHub/Page previews === -->
  <link rel="canonical" href="https://staticquasar931.github.io/GTA-Mods/">
  <meta name="keywords" content="GTA Mods, GTA mod, GTA game, GTA g@me, unblocked GTA, GTA at school, working at school, school-safe games, unbl0cked, staticquasar931, static 931, staticq931" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="GTA Mods – GTA-style Modes (Unblocked)" />
  <meta property="og:description" content="Play GTA-style modes free in your browser. School-safe, Chromebook friendly, and fullscreen canvas." />
  <meta property="og:url" content="https://staticquasar931.github.io/GTA-Mods/" />
  <meta property="og:image" content="https://res.cloudinary.com/dcsrqennd/image/upload/v1758327608/GTA_Mods_StaticQuasar931_vua0h4.png" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#0aa" />
</head>
<body class="light"><module>
<moduleprefs title="Google.com">
<content type="html"><!--[CDATA[

<!DOCTYPE html>

  <!-- Keep your original meta/setup exactly as-is -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <!-- Hidden SEO block (safe in body; no layout impact) -->
  <div style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden">
    <h1>Play GTA Mods — GTA-style Modes in Browser</h1>
    <p>GTA Mods is a collection of GTA-like game modes you can play in your browser — free, fullscreen, and optimized for Chromebook and desktop.</p>
  </div>

  <!-- Your original stylesheet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/centerclassroom/mc55@main/style.css">

  <style>
    /* Keep original behavior */
    canvas:focus { outline: none; }
    html, body {
      padding: 0; margin: 0; overflow: hidden; height: 100%;
      -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none;
      -moz-user-select: none; -ms-user-select: none; user-select: none;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    /* Static Menu (top-left) */
    #staticMenu{
      position: fixed; top: 10px; left: 10px; z-index: 99999;
      background:#111; color:#0ff; padding:10px 16px; border-radius:10px; font-size:14px;
      animation: glow 2s infinite alternate;
      transition: opacity .35s ease, transform .35s ease, visibility .35s ease;
    }
    #staticMenu a{ color:#0ff; text-decoration:none; font-weight:bold; }
    #closeStaticMenu{ margin-left:12px; color:#f55; cursor:pointer; }
    @keyframes glow{0%{opacity:.7}100%{opacity:1; box-shadow:0 0 10px #0ff}}

    /* Slide menu (bottom-right): Google Form → Discord → Instagram */
    #staticSlideMenu{
      position: fixed; bottom:24px; right:24px; z-index: 99999;
      width:100px; height:100px; display:flex; align-items:center; justify-content:center;
      opacity:0; transform:translateX(120px) scale(.96); pointer-events:none;
      will-change: transform, opacity;
      transition: opacity .35s ease, transform .35s ease, visibility .35s ease;
    }
    #staticSlideMenu img{ width:100%; height:100%; object-fit:cover; border-radius:50%; user-select:none; }
    #staticSlideMenu.discord-active img{ transform: scale(1.2); } /* 20% bigger on Discord */
    @media (max-width:768px){ #staticSlideMenu{ width:82px; height:82px; bottom:20px; right:20px; } }
    .slideInRight2s{ animation: slideInRight2s 2s ease forwards; }
    .slideOutRight2s{ animation: slideOutRight2s 2s ease forwards; }
    @keyframes slideInRight2s{ from{opacity:0; transform:translateX(120px) scale(.96)} to{opacity:1; transform:translateX(0) scale(1)} }
    @keyframes slideOutRight2s{ from{opacity:1; transform:translateX(0) scale(1)} to{opacity:0; transform:translateX(120px) scale(.96)} }

    /* Fix Cursor Issues button (middle-right, a little low) */
    #fixCursorBtn{
      position: fixed; right: 20px; top: 62%; transform: translateY(-50%);
      z-index: 99999; background: rgba(17,17,17,.92); color:#0ff;
      border:1px solid rgba(0,255,255,.35); padding:10px 14px; border-radius:10px;
      font-size:14px; cursor:pointer; box-shadow:0 0 12px rgba(0,255,255,.15);
      white-space: pre-line; /* allow line break in label */
      transition: opacity .35s ease, transform .35s ease, visibility .35s ease;
    }
    #fixCursorBtn:hover{ filter:brightness(1.15); }
    #fixCursorBtn:active{ transform: translateY(-50%) scale(.98); }

    /* Global hide (Y+U+I) for all menus/buttons */
    .menus-hidden #staticMenu,
    .menus-hidden #staticSlideMenu,
    .menus-hidden #fixCursorBtn{
      opacity:0; transform: translateY(10px) scale(.98); visibility:hidden;
    }
  </style>

  <!-- Static Menu -->
  <div id="staticMenu" aria-label="Static menu with site link">
    <a href="https://sites.google.com/view/staticquasar931/gm3z" target="_blank" rel="noopener"
       aria-label="Open more unblocked games by StaticQuasar931 in a new tab">More Unblocked Games by Static</a>
    <span id="closeStaticMenu" aria-label="Hide Static Menu for 3 minutes" role="button" tabindex="0">✕</span>
  </div>

  <!-- Rotating slide menu -->
  <a id="staticSlideMenu" href="https://sites.google.com/view/staticquasar931/google-form" target="_blank" rel="noopener"
     aria-label="Rotating quick link: Google Form, Discord, or Instagram">
    <img
      src="https://res.cloudinary.com/dcsrqennd/image/upload/v1747533056/raw_um4pvq.png"
      alt="Open StaticQuasar931 Google Form (feedback & game requests) — opens in a new tab"
      loading="lazy" decoding="async" referrerpolicy="no-referrer">
  </a>

  <!-- Cursor/Fullscreen helper -->
  <button id="fixCursorBtn" type="button" aria-label="Fix cursor issues and open fullscreen in a new tab">
Fix curser issues
     (Fullscreen)</button>

  <!-- Your original Unity DOM -->
  <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" tabindex="-1" style="cursor: default;" width="2560" height="1279"></canvas>
  </div>
  <div id="loading-cover" style="background: url('background.png') center center / cover; display: none;">
      <div id="unity-loading-bar">
          <div id="unity-progress-bar-empty" style="">
              <div id="unity-progress-bar-full" style="width: 100%;"></div>
          </div>
          <div class="spinner" style="display: none;"></div>
      </div>
  </div>

  <!-- ===== Everything below is your original loader/startup logic, with LOCAL MEMORY SAVES wired in ===== -->
  <script>
    // --- Static Menu close/return (unchanged behavior) ---
    (function initStaticMenuClose(){
      const menu = document.getElementById("staticMenu");
      const btn = document.getElementById("closeStaticMenu");
      if (!menu || !btn) return;
      btn.onclick = () => {
        menu.style.display = "none";
        setTimeout(() => { menu.style.display = "block"; }, 180000);
      };
    })();

    // --- Slide popup rotation (Google Form → Discord → Instagram) ---
    const FORM  = {
      src: "https://res.cloudinary.com/dcsrqennd/image/upload/v1747533056/raw_um4pvq.png",
      alt: "Open StaticQuasar931 Google Form (feedback & game requests) — opens in a new tab",
      link: "https://sites.google.com/view/staticquasar931/google-form",
      id: "form"
    };
    const DISCORD = {
      src: "https://res.cloudinary.com/dcsrqennd/image/upload/v1758072526/Join_Our_Discord_StaticQuassar931_lcplrf.png",
      alt: "Join the StaticQuasar931 Discord community — opens in a new tab",
      link: "https://discord.gg/DP2hM7RRhR",
      id: "discord"
    };
    const INSTA = {
      src: "https://res.cloudinary.com/dcsrqennd/image/upload/v1747533158/raw_cw34yi.png",
      alt: "Visit StaticQuasar931 on Instagram — opens in a new tab",
      link: "https://www.instagram.com/freeschoolgamepage/",
      id: "instagram"
    };
    const ROTATION = [FORM, DISCORD, INSTA];

    // Timing: 2s in → 5s visible → 2s out → 20s hidden
    const T_IN = 2000, T_SHOW = 5000, T_OUT = 2000, T_HIDDEN = 20000;

    function preload(src){ return new Promise(res => { const im=new Image(); im.onload=im.onerror=res; im.src=src; }); }
    function restartAnim(el, cls){
      el.classList.remove("slideInRight2s","slideOutRight2s");
      void el.offsetWidth; el.classList.add(cls);
    }

    (async function rotatePopup(){
      const anchor=document.getElementById("staticSlideMenu"), img=anchor?anchor.querySelector("img"):null;
      if(!anchor||!img) return;
      await Promise.all(ROTATION.map(i=>preload(i.src)));
      let idx=0;
      while(true){
        const st=ROTATION[idx];
        img.src=st.src; img.alt=st.alt; anchor.href=st.link;
        anchor.classList.toggle("discord-active", st.id==="discord");
        anchor.style.pointerEvents="auto";
        restartAnim(anchor,"slideInRight2s");
        await new Promise(r=>setTimeout(r, T_IN + T_SHOW));
        restartAnim(anchor,"slideOutRight2s");
        await new Promise(r=>setTimeout(r, T_OUT));
        anchor.style.pointerEvents="none";
        await new Promise(r=>setTimeout(r, T_HIDDEN));
        idx=(idx+1)%ROTATION.length;
      }
    })();

    // --- Menus global toggle via Y+U+I (press together) ---
    (function menusHotkey(){
      const down = new Set();
      function check(){
        if (down.has('y') && down.has('u') && down.has('i')){
          document.body.classList.toggle('menus-hidden');  // smooth via CSS transitions
        }
      }
      window.addEventListener('keydown', (e)=>{ down.add(e.key.toLowerCase()); check(); });
      window.addEventListener('keyup',   (e)=>{ down.delete(e.key.toLowerCase()); });
      window.addEventListener('blur', ()=> down.clear());
    })();
  </script>

  <!-- Your original boot script (kept 1:1 except for the LOCAL MEMORY SAVE bridge + leave warning) -->
  <script>
    const hideFullScreenButton = "";
    const buildUrl = "https://cdn.jsdelivr.net/gh/centerclassroom/mc55@main/Build";
    const loaderUrl = buildUrl + "/bb0d9ecdb05db3e84da20bd14a4f84dc.loader.js";
    const config = {
        dataUrl: buildUrl + "/cffd2fddc93a5e3bb5ff56ac3bb5a297.data.br",
        frameworkUrl: buildUrl + "/c39bf58f300a834e953a20c745c5e5f2.framework.js",
        codeUrl: buildUrl + "/d649f30ffe591eef6765ee27d7fc980f.wasm.br",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "DefaultCompany",
        productName: "GtaArcade",
        productVersion: "0.1"
    };

    const container = document.querySelector("#unity-container");
    const canvas = document.querySelector("#unity-canvas");
    const loadingCover = document.querySelector("#loading-cover");
    const progressBarEmpty = document.querySelector("#unity-progress-bar-empty");
    const progressBarFull = document.querySelector("#unity-progress-bar-full");
    const spinner = document.querySelector('.spinner');

    const canFullscreen = (function () {
        for (const key of [
            'exitFullscreen','webkitExitFullscreen','webkitCancelFullScreen','mozCancelFullScreen','msExitFullscreen',
        ]) { if (key in document) return true; }
        return false;
    }());

    if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
        container.className = "unity-mobile";
    }

    loadingCover.style.background = "url('background.png') center / cover";
    loadingCover.style.display = "";

    document.addEventListener('contextmenu', event => event.preventDefault());

    function FocusGame() { window.focus(); canvas.focus(); }
    window.addEventListener('pointerdown', FocusGame);
    window.addEventListener('touchstart', FocusGame);

    let StartUnityInstance;
    let myGameInstance;
    let ysdk = null; // unchanged

    let environmentData = {
        language: "en",
        domain: "default_domain",
        deviceType: "desktop",
        isMobile: false,
        isDesktop: true,
        isTablet: false,
        isTV: false,
        appID: "default_app_id",
        browserLang: navigator.language || "en",
        payload: null,
        promptCanShow: false,
        reviewCanShow: false,
        platform: navigator.platform,
        browser: (function() {
            let u = navigator.userAgent;
            if (u.includes("YaBrowser")) return "Yandex";
            if (u.includes("OPR") || u.includes("Opera")) return "Opera";
            if (u.includes("Firefox")) return "Firefox";
            if (u.includes("MSIE") || u.includes("Trident")) return "IE";
            if (u.includes("Edge")) return "Edge";
            if (u.includes("Chrome")) return "Chrome";
            if (u.includes("Safari")) return "Safari";
            return "Other";
        })()
    };

    let cloudSaves = 'noData';
    let paymentsData = 'none';
    let playerData = 'noData';
    let player = null;
    let payments = null;
    let initGame = false;
    let nowFullAdOpen = false;

    /* ======= LOCAL MEMORY SAVE BRIDGE (replaces stubs) ======= */
    const LS_KEY = "sq931.gta-mods.save";
    function SaveCloud(data){
      try{
        const payload = (typeof data === "string") ? data : JSON.stringify(data||{});
        localStorage.setItem(LS_KEY, payload);
      }catch(e){}
    }
    function LoadCloud(){
      try{
        const v = localStorage.getItem(LS_KEY);
        return Promise.resolve(v ? v : "noData");
      }catch(e){
        return Promise.resolve("noData");
      }
    }
    function InitPlayer(){ return Promise.resolve("noAuth"); }
    // Optional helpers Unity templates sometimes poke:
    function GetPayments(){ return Promise.resolve("none"); }
    function StickyAdActivity() {}
    function Review() {}
    function PromptShow() {}
    function InitLeaderboards() {}
    function GetLeaderboardScores() {}
    function SetLeaderboardScores() {}
    function ConsumePurchase() {}
    function flasgsData() {}

    // Warn before leaving so users don't lose unsaved in-game progress.
    window.onbeforeunload = function(){
      return "Leave this page? Progress is saved locally when supported by the build.";
    };

    function FullAdShow() {
        try {
            if (!nowFullAdOpen) {
                nowFullAdOpen = true;
                if (initGame) {
                    myGameInstance.SendMessage("YandexGame", "OpenFullAd");
                }
                setTimeout(() => {
                    nowFullAdOpen = false;
                    if (initGame) {
                        myGameInstance.SendMessage("YandexGame", "CloseFullAd", "true");
                    }
                    FocusGame();
                }, 500);
            }
        } catch (error) {}
    }

    function RewardedShow(rewardId) {
        try {
            myGameInstance.SendMessage("YandexGame", "RewardVideo", rewardId);
            function closeRewardedAd() {
                myGameInstance.SendMessage("YandexGame", "CloseRewardVideo");
                FocusGame();
            }
            closeRewardedAd();
        } catch (error) {}
    }

    // File merge helpers (kept)
    async function mergeFileParts(fileUrl, partCount) {
        try {
            const parts = [];
            for (let i = 0; i < partCount; i++) {
                const partUrl = `${fileUrl}.part${i}`;
                const response = await fetch(partUrl);
                if (!response.ok) {
                    throw new Error(`Failed to fetch part ${partUrl}: ${response.statusText}`);
                }
                const part = await response.arrayBuffer();
                parts.push(part);
            }
            const totalSize = parts.reduce((sum, part) => sum + part.byteLength, 0);
            const merged = new Uint8Array(totalSize);
            let offset = 0;
            for (const part of parts) {
                merged.set(new Uint8Array(part), offset);
                offset += part.byteLength;
            }
            const blob = new Blob([merged], { type: 'application/octet-stream' });
            return URL.createObjectURL(blob);
        } catch (error) {
            console.error(`Error merging file ${fileUrl}:`, error);
            throw error;
        }
    }

    async function prepareUnityConfig(cfg) {
        try {
            // Restore your original split-file behavior
            const dataPartsCount = 4;
            cfg.dataUrl = await mergeFileParts(buildUrl + "/cffd2fddc93a5e3bb5ff56ac3bb5a297.data.br", dataPartsCount);
            const wasmPartsCount = 4;
            cfg.codeUrl = await mergeFileParts(buildUrl + "/d649f30ffe591eef6765ee27d7fc980f.wasm.br", wasmPartsCount);
            return cfg;
        } catch (error) {
            console.error("Error preparing Unity config:", error);
            throw error;
        }
    }

    // *** IMPORTANT ***: Keep your dynamic loader EXACTLY as before
    try {
        const script = document.createElement("script");
        script.src = loaderUrl;
        script.onload = async () => {
            try {
                const updatedConfig = await prepareUnityConfig({ ...config });

                StartUnityInstance = function () {
                    createUnityInstance(canvas, updatedConfig, (progress) => {
                        spinner.style.display = "none";
                        progressBarEmpty.style.display = "";
                        progressBarFull.style.width = `${100 * progress}%`;
                    }).then((unityInstance) => {
                        myGameInstance = unityInstance;
                        loadingCover.style.display = "none";
                        initGame = true; // restore flag so ads callbacks behave

                        // Optional: immediately return any saved blob to Unity if it listens.
                        // LoadCloud().then(saved => {
                        //   if (saved && saved !== "noData") {
                        //     myGameInstance.SendMessage("BridgeObject", "OnSaveLoaded", saved);
                        //   }
                        // });
                    }).catch((message) => {
                        console.error("Unity yükleme hatası:", message);
                    });
                };
                StartUnityInstance();
            } catch (error) {
                console.error("Unity başlatma sırasında hata:", error);
            }
        };
        document.body.appendChild(script);
    } catch (error) {
        console.error("Başlatma sırasında hata:", error);
    }

    function InitGame() {
        try {
            console.log('Init Game Success');
            initGame = true;
            if (nowFullAdOpen === true && myGameInstance != null) {
                myGameInstance.SendMessage('YandexGame', 'OpenFullAd');
            }
        } catch (error) {
            console.error("InitGame sırasında hata:", error);
        }
    }

    window.addEventListener("unhandledrejection", function(event) {
        console.warn("Hata es geçildi:", event.reason);
        event.preventDefault();
    });

    // --- Open in about:blank WITHOUT the button in the clone; request fullscreen ---
    (function(){
      const btn = document.getElementById('fixCursorBtn');
      if(!btn) return;
      btn.addEventListener('click', function(){
        try{
          const w = window.open('', '_blank'); // true about:blank
          if(!w){ alert('Pop-up blocked. Please allow pop-ups for this site.'); return; }
          let raw = document.documentElement.outerHTML;
          // remove the fullscreen button block from the clone
          raw = raw.replace(/<button id="fixCursorBtn"[\s\S]*?<\/button>/i, '');
          const fullHTML = '<!DOCTYPE html>' + raw;
          w.document.open(); w.document.write(fullHTML); w.document.close();

          // Try to fullscreen after clone loads
          const tryFS = () => {
            try{
              const c = w.document.getElementById('unity-canvas');
              if (c && c.requestFullscreen) c.requestFullscreen().catch(()=>{});
            }catch(e){}
          };
          tryFS(); setTimeout(tryFS, 1200); setTimeout(tryFS, 3000);
        }catch(e){
          console.warn('Could not open about:blank:', e);
        }
      });
    })();
  </script>

  <!-- Keep your original external loader includes (as you had them) -->
  <script src="https://cdn.jsdelivr.net/gh/centerclassroom/mc55@main/Build/bb0d9ecdb05db3e84da20bd14a4f84dc.loader.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/centerclassroom/mc55@main/Build/c39bf58f300a834e953a20c745c5e5f2.framework.js"></script>

]]></content>
</moduleprefs></module>
</body></html>
